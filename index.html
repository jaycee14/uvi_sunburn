<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UVI and Sunburn Time</title>
    <!-- Add Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
    body, .sunset-table {
        background: linear-gradient(to bottom, #ff6f61, #ffa07a, #ffb6c1, #ffd6e2, #ffe9f3);
    }

    .sunset-container {
            background: linear-gradient(to bottom, #ff6f61, #ffa07a, #ffb6c1, #ffd6e2, #ffe9f3);
            border-radius: 10px; /* Optional: Add rounded corners to the container */
            padding: 20px; /* Optional: Add padding to the container */
        }

    </style>
</head>
<body>  
    <div class="container mt-5">
        <h1>How long in the Sun till I burn?</h1>
        <div class="row mt-4">
            <div class="col-md-6">
                <h2>UV Index</h2>
                <select class="form-select" id="dropdown1">
                    <option value=1>1</option>
                    <option value=2>2</option>
                    <option value=3 selected>3</option>
                    <option value=4>4</option>
                    <option value=5>5</option>
                    <option value=6>6</option>
                    <option value=7>7</option>
                    <option value=8>8</option>
                    <option value=9>9</option>
                    <option value=10>10</option>
                    <option value=11>11</option>
                </select>
            </div>
            <div class="col-md-6">
                <h2>Skin Type</h2>
                <select class="form-select" id="dropdown2">
                    <option value=1>1</option>
                    <option value=2>2</option>
                    <option value=3 selected>3</option>
                    <option value=4>4</option>
                </select>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-md-12">
                <h2 id="headline_text"></h2>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-md-12">
                <h2>Detailed results:</h2>
                <div id="output_div">
                    <ul id="list"></ul>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-md-12">
                <h2>Overview:</h2>
                <p>How the sun affects you depends on two things: the amount of UV radiation your receive and how your skin reacts to that radiation.
                </p>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-md-12">
                <h2>Skin Types</h2>
                <p>The skin types used for this app are taken from the World Health Organisation. You can see more about them <a href="https://www.who.int/news-room/questions-and-answers/item/radiation-ultraviolet-(uv)-radiation-and-skin-cancer">here.</a></p>
            <table class="table table-bordered sunset-table">
            <thead>
                <tr>
                    <th>Skin type classification</th>
                    <th>Do you burn in the sun? (without protection)</th>
                    <th>Do you tan after having been in the sun?</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>Always</td>
                    <td>Seldom</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Usually</td>
                    <td>Sometimes</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>Sometimes</td>
                    <td>Usually</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>Seldom</td>
                    <td>Always</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>Naturally brown skin</td>
                    <td></td>
                </tr>
                <tr>
                    <td>6</td>
                    <td>Naturally black skin</td>
                    <td></td>
                </tr>
            </tbody>
        </table>
        Where are the results for skin type 5 & 6? The scientfic <a href="https://www.nature.com/articles/s41598-018-36850-x">paper</a> these calculations are based upon only produced data for skin types 1-4 as these are 
        at higher risk of developing skin cancer. We will look for more data to extend this analysis to these skin types. 
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-md-12">
                <h2>UVI Index?</h2>
                The Ultra Violet Index number is a method of describing in one number the strength of, sun-burn causing, UV radiation coming from the sun. It varies by location, season and local weather conditions and is widely available in weather forecast apps for your local area. 
                Your smart phone or smart watch maybe able to tell your current UVI level.
                More information can be found <a href="https://en.wikipedia.org/wiki/Ultraviolet_index">here.</a> 
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-md-12">
                <h2>Burn Types</h2>
                    <ul>
                        <li>First-degree sunburn produces redness, swelling, pain and superfcial damage. These burns only afect the 
                            skin surface (epidermis) and cause minor tissue damage.</li>
                        <li>Second-degree sunburn afects the top and underlying layers of skin (epidermis and dermis), causing 
                            blisters, pain, swelling and redness, which can require medical attention to deal with effectively.</li>
                    </ul>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-md-12">
                <h2>Indication</h2>
                <p>Whilst this app is based on published scientfic data the information given is for indicative purposes only. 
                    As described in the paper even individuals with the same skin type will react differently (hence the population stats). 
                    Additionally the actual UV radiation reaching an individual will depend on lots of things - cloud cover, accuracy of forecast, quality of shade etc. which are not taken into account.
                </p>
            </div>
        </div>
    </div>

    <!-- Add Bootstrap JS and jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Get references to the dropdowns and output element
        const dropdown1 = document.getElementById('dropdown1');
        const dropdown2 = document.getElementById('dropdown2');
        const output = document.getElementById('output');

        // Update the output text when the dropdowns change
        dropdown1.addEventListener('change', updateOutput);
        dropdown2.addEventListener('change', updateOutput);

        function getData(skin,idx){

const data={1: [{1: {'first_emerge': {'hour': 1, 'minute': 15},
        'second_emerge': {'hour': 3, 'minute': 15},
        'per25': {'hour': 2, 'minute': 13},
        'per50': {'hour': 2, 'minute': 47},
        'per75': {'hour': 3, 'minute': 28}},
    2: {'first_emerge': {'hour': 0, 'minute': 53},
        'second_emerge': {'hour': 2, 'minute': 18},
        'per25': {'hour': 1, 'minute': 34},
        'per50': {'hour': 1, 'minute': 57},
        'per75': {'hour': 2, 'minute': 27}},
    3: {'first_emerge': {'hour': 0, 'minute': 40},
        'second_emerge': {'hour': 1, 'minute': 44},
        'per25': {'hour': 1, 'minute': 11},
        'per50': {'hour': 1, 'minute': 29},
        'per75': {'hour': 1, 'minute': 51}},
    4: {'first_emerge': {'hour': 0, 'minute': 32},
        'second_emerge': {'hour': 1, 'minute': 23},
        'per25': {'hour': 0, 'minute': 57},
        'per50': {'hour': 1, 'minute': 11},
        'per75': {'hour': 1, 'minute': 28}},
    5: {'first_emerge': {'hour': 0, 'minute': 26},
        'second_emerge': {'hour': 1, 'minute': 8},
        'per25': {'hour': 0, 'minute': 46},
        'per50': {'hour': 0, 'minute': 58},
        'per75': {'hour': 1, 'minute': 13}},
    6: {'first_emerge': {'hour': 0, 'minute': 22},
        'second_emerge': {'hour': 0, 'minute': 57},
        'per25': {'hour': 0, 'minute': 39},
        'per50': {'hour': 0, 'minute': 49},
        'per75': {'hour': 1, 'minute': 1}},
    7: {'first_emerge': {'hour': 0, 'minute': 19},
        'second_emerge': {'hour': 0, 'minute': 49},
        'per25': {'hour': 0, 'minute': 34},
        'per50': {'hour': 0, 'minute': 42},
        'per75': {'hour': 0, 'minute': 53}},
    8: {'first_emerge': {'hour': 0, 'minute': 16},
        'second_emerge': {'hour': 0, 'minute': 43},
        'per25': {'hour': 0, 'minute': 29},
        'per50': {'hour': 0, 'minute': 37},
        'per75': {'hour': 0, 'minute': 46}},
    9: {'first_emerge': {'hour': 0, 'minute': 14},
        'second_emerge': {'hour': 0, 'minute': 38},
        'per25': {'hour': 0, 'minute': 26},
        'per50': {'hour': 0, 'minute': 32},
        'per75': {'hour': 0, 'minute': 41}},
    10: {'first_emerge': {'hour': 0, 'minute': 13},
        'second_emerge': {'hour': 0, 'minute': 34},
        'per25': {'hour': 0, 'minute': 23},
        'per50': {'hour': 0, 'minute': 29},
        'per75': {'hour': 0, 'minute': 36}},
    11: {'first_emerge': {'hour': 0, 'minute': 11},
        'second_emerge': {'hour': 0, 'minute': 31},
        'per25': {'hour': 0, 'minute': 21},
        'per50': {'hour': 0, 'minute': 26},
        'per75': {'hour': 0, 'minute': 33}}}],
    2: [{1: {'first_emerge': {'hour': 1, 'minute': 42},
        'second_emerge': {'hour': 3, 'minute': 42},
        'per25': {'hour': 3, 'minute': 0},
        'per50': {'hour': 3, 'minute': 45},
        'per75': {'hour': 4, 'minute': 41}},
    2: {'first_emerge': {'hour': 1, 'minute': 12},
        'second_emerge': {'hour': 2, 'minute': 37},
        'per25': {'hour': 2, 'minute': 7},
        'per50': {'hour': 2, 'minute': 38},
        'per75': {'hour': 3, 'minute': 18}},
    3: {'first_emerge': {'hour': 0, 'minute': 54},
        'second_emerge': {'hour': 1, 'minute': 59},
        'per25': {'hour': 1, 'minute': 36},
        'per50': {'hour': 2, 'minute': 0},
        'per75': {'hour': 2, 'minute': 30}},
    4: {'first_emerge': {'hour': 0, 'minute': 43},
        'second_emerge': {'hour': 1, 'minute': 34},
        'per25': {'hour': 1, 'minute': 16},
        'per50': {'hour': 1, 'minute': 36},
        'per75': {'hour': 1, 'minute': 59}},
    5: {'first_emerge': {'hour': 0, 'minute': 35},
        'second_emerge': {'hour': 1, 'minute': 18},
        'per25': {'hour': 1, 'minute': 3},
        'per50': {'hour': 1, 'minute': 19},
        'per75': {'hour': 1, 'minute': 38}},
    6: {'first_emerge': {'hour': 0, 'minute': 30},
        'second_emerge': {'hour': 1, 'minute': 5},
        'per25': {'hour': 0, 'minute': 53},
        'per50': {'hour': 1, 'minute': 6},
        'per75': {'hour': 1, 'minute': 23}},
    7: {'first_emerge': {'hour': 0, 'minute': 26},
        'second_emerge': {'hour': 0, 'minute': 56},
        'per25': {'hour': 0, 'minute': 45},
        'per50': {'hour': 0, 'minute': 57},
        'per75': {'hour': 1, 'minute': 11}},
    8: {'first_emerge': {'hour': 0, 'minute': 22},
        'second_emerge': {'hour': 0, 'minute': 49},
        'per25': {'hour': 0, 'minute': 40},
        'per50': {'hour': 0, 'minute': 50},
        'per75': {'hour': 1, 'minute': 2}},
    9: {'first_emerge': {'hour': 0, 'minute': 20},
        'second_emerge': {'hour': 0, 'minute': 43},
        'per25': {'hour': 0, 'minute': 35},
        'per50': {'hour': 0, 'minute': 44},
        'per75': {'hour': 0, 'minute': 55}},
    10: {'first_emerge': {'hour': 0, 'minute': 17},
        'second_emerge': {'hour': 0, 'minute': 39},
        'per25': {'hour': 0, 'minute': 31},
        'per50': {'hour': 0, 'minute': 39},
        'per75': {'hour': 0, 'minute': 49}},
    11: {'first_emerge': {'hour': 0, 'minute': 16},
        'second_emerge': {'hour': 0, 'minute': 35},
        'per25': {'hour': 0, 'minute': 28},
        'per50': {'hour': 0, 'minute': 35},
        'per75': {'hour': 0, 'minute': 44}}}],
    3: [{1: {'first_emerge': {'hour': 2, 'minute': 7},
        'second_emerge': {'hour': 4, 'minute': 8},
        'per25': {'hour': 3, 'minute': 40},
        'per50': {'hour': 4, 'minute': 34},
        'per75': {'hour': 5, 'minute': 42}},
    2: {'first_emerge': {'hour': 1, 'minute': 29},
        'second_emerge': {'hour': 2, 'minute': 55},
        'per25': {'hour': 2, 'minute': 35},
        'per50': {'hour': 3, 'minute': 13},
        'per75': {'hour': 4, 'minute': 2}},
    3: {'first_emerge': {'hour': 1, 'minute': 8},
        'second_emerge': {'hour': 2, 'minute': 13},
        'per25': {'hour': 1, 'minute': 57},
        'per50': {'hour': 2, 'minute': 27},
        'per75': {'hour': 3, 'minute': 3}},
    4: {'first_emerge': {'hour': 0, 'minute': 54},
        'second_emerge': {'hour': 1, 'minute': 45},
        'per25': {'hour': 1, 'minute': 33},
        'per50': {'hour': 1, 'minute': 57},
        'per75': {'hour': 2, 'minute': 26}},
    5: {'first_emerge': {'hour': 0, 'minute': 44},
        'second_emerge': {'hour': 1, 'minute': 27},
        'per25': {'hour': 1, 'minute': 17},
        'per50': {'hour': 1, 'minute': 36},
        'per75': {'hour': 2, 'minute': 0}},
    6: {'first_emerge': {'hour': 0, 'minute': 37},
        'second_emerge': {'hour': 1, 'minute': 13},
        'per25': {'hour': 1, 'minute': 5},
        'per50': {'hour': 1, 'minute': 21},
        'per75': {'hour': 1, 'minute': 41}},
    7: {'first_emerge': {'hour': 0, 'minute': 32},
        'second_emerge': {'hour': 1, 'minute': 3},
        'per25': {'hour': 0, 'minute': 56},
        'per50': {'hour': 1, 'minute': 9},
        'per75': {'hour': 1, 'minute': 27}},
    8: {'first_emerge': {'hour': 0, 'minute': 28},
        'second_emerge': {'hour': 0, 'minute': 55},
        'per25': {'hour': 0, 'minute': 48},
        'per50': {'hour': 1, 'minute': 1},
        'per75': {'hour': 1, 'minute': 16}},
    9: {'first_emerge': {'hour': 0, 'minute': 25},
        'second_emerge': {'hour': 0, 'minute': 48},
        'per25': {'hour': 0, 'minute': 43},
        'per50': {'hour': 0, 'minute': 53},
        'per75': {'hour': 1, 'minute': 7}},
    10: {'first_emerge': {'hour': 0, 'minute': 22},
        'second_emerge': {'hour': 0, 'minute': 43},
        'per25': {'hour': 0, 'minute': 38},
        'per50': {'hour': 0, 'minute': 48},
        'per75': {'hour': 1, 'minute': 0}},
    11: {'first_emerge': {'hour': 0, 'minute': 20},
        'second_emerge': {'hour': 0, 'minute': 39},
        'per25': {'hour': 0, 'minute': 34},
        'per50': {'hour': 0, 'minute': 43},
        'per75': {'hour': 0, 'minute': 54}}}],
    4: [{1: {'first_emerge': {'hour': 2, 'minute': 53},
        'second_emerge': {'hour': 4, 'minute': 53},
        'per25': {'hour': 4, 'minute': 56},
        'per50': {'hour': 6, 'minute': 10},
        'per75': {'hour': 7, 'minute': 42}},
    2: {'first_emerge': {'hour': 2, 'minute': 2},
        'second_emerge': {'hour': 3, 'minute': 27},
        'per25': {'hour': 3, 'minute': 29},
        'per50': {'hour': 4, 'minute': 21},
        'per75': {'hour': 5, 'minute': 26}},
    3: {'first_emerge': {'hour': 1, 'minute': 33},
        'second_emerge': {'hour': 2, 'minute': 37},
        'per25': {'hour': 2, 'minute': 38},
        'per50': {'hour': 3, 'minute': 18},
        'per75': {'hour': 4, 'minute': 7}},
    4: {'first_emerge': {'hour': 1, 'minute': 14},
        'second_emerge': {'hour': 2, 'minute': 5},
        'per25': {'hour': 2, 'minute': 6},
        'per50': {'hour': 2, 'minute': 37},
        'per75': {'hour': 3, 'minute': 17}},
    5: {'first_emerge': {'hour': 1, 'minute': 0},
        'second_emerge': {'hour': 1, 'minute': 43},
        'per25': {'hour': 1, 'minute': 44},
        'per50': {'hour': 2, 'minute': 9},
        'per75': {'hour': 2, 'minute': 42}},
    6: {'first_emerge': {'hour': 0, 'minute': 51},
        'second_emerge': {'hour': 1, 'minute': 26},
        'per25': {'hour': 1, 'minute': 27},
        'per50': {'hour': 1, 'minute': 49},
        'per75': {'hour': 2, 'minute': 16}},
    7: {'first_emerge': {'hour': 0, 'minute': 44},
        'second_emerge': {'hour': 1, 'minute': 14},
        'per25': {'hour': 1, 'minute': 15},
        'per50': {'hour': 1, 'minute': 34},
        'per75': {'hour': 1, 'minute': 57}},
    8: {'first_emerge': {'hour': 0, 'minute': 38},
        'second_emerge': {'hour': 1, 'minute': 5},
        'per25': {'hour': 1, 'minute': 5},
        'per50': {'hour': 1, 'minute': 22},
        'per75': {'hour': 1, 'minute': 42}},
    9: {'first_emerge': {'hour': 0, 'minute': 34},
        'second_emerge': {'hour': 0, 'minute': 57},
        'per25': {'hour': 0, 'minute': 58},
        'per50': {'hour': 1, 'minute': 12},
        'per75': {'hour': 1, 'minute': 30}},
    10: {'first_emerge': {'hour': 0, 'minute': 30},
        'second_emerge': {'hour': 0, 'minute': 51},
        'per25': {'hour': 0, 'minute': 52},
        'per50': {'hour': 1, 'minute': 5},
        'per75': {'hour': 1, 'minute': 21}},
    11: {'first_emerge': {'hour': 0, 'minute': 27},
        'second_emerge': {'hour': 0, 'minute': 46},
        'per25': {'hour': 0, 'minute': 46},
        'per50': {'hour': 0, 'minute': 58},
        'per75': {'hour': 1, 'minute': 13}}}]};

        return data[skin][0][idx];
}

function updateOutput() {

    const idx = dropdown1.value;
    const skin = dropdown2.value;

    const exposure = getData(skin,idx);
    // console.log(exposure);

    // list version
    const listContainer = document.getElementById('list');

    const headline = document.getElementById('headline_text')

    //clear the output
    while (listContainer.firstChild) {
        listContainer.removeChild(listContainer.firstChild);
    }

    // Loop through the JSON data and create list items
    for (const key in exposure) {
    if (exposure.hasOwnProperty(key)) {
        const item = exposure[key];
        const listItem = document.createElement('li');
        // listItem.textContent = `${key}: Hour ${item.hour}, Minute ${item.minute}`;
        listItem.textContent = process_data(key,item.hour,item.minute);
        listContainer.appendChild(listItem);

        if(key==='first_emerge'){
            headline.textContent='Headline: '+ process_time(item.hour,item.minute);
        }
    }
    }
}
function process_time(hour,min){

    let time='';

    if(hour===0){
        time=`${min} minutes.`;
    }
    else{
        time=`${hour} hr ${min} minutes.`;
    }

    return time;
}

function process_data(key,hour,min){

    var time;
    // let time='';

    let message='';
    var dict = {
        'first_emerge': 'Time till first appearance of first degree burn symptons: ',
        'second_emerge': 'Time till first appearance of second degree burn symptons: ',
        'per25':'25% of the population with this skin type will have first degree burns in: ',
        'per50':'50% of the population with this skin type will have first degree burns in: ',
        'per75':'75% of the population with this skin type will have first degree burns in: '
    };

    // if(hour===0){
    //     time=`${min} minutes.`;
    // }
    // else{
    //     time=`${hour} hr ${min} minutes.`;
    // }

    time = process_time(hour,min);

    message = dict[key] + time;

    return message;
}

    updateOutput();
    </script>

    <!-- Cloudflare Web Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "0ec5cab754e04aea9ec789e528195dfe"}'></script><!-- End Cloudflare Web Analytics -->
</body>
</html>
